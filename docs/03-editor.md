# CLI 编辑器：多行输入与预览

Dogent 内置了基于 CLI 的 Markdown 编辑器，适合在终端中完成多行输入、结构化改写与预览确认。本章介绍进入方式、常用功能与快捷键。

## 1. 进入编辑器的几种方式

### 方式 A：在输入框中按 `Ctrl+E` 直接进入 markdown 编辑模式

适用于以下场景：

- 普通提问需要多行输入
- Agent 要你补充信息（澄清/确认）
- 需要对提纲或修订建议进行批注与编辑

### 方式 B：使用 `/edit <path>` 打开文件

```text
> /edit docs/intro.md
```

支持文件类型：`.md` / `.markdown` / `.mdown` / `.mkd` / `.txt`。

> 编辑器只允许工作区内的文件路径。

---

## 2. 编辑器核心能力

- **Markdown 语法高亮**（标题、列表、代码、引用）
- **预览模式**：使用 `Ctrl + P` 渲染 Markdown 预览
- **保存/提交**：适用于「编辑文件」与「提交给 Agent」两类场景
- **双模式**：默认模式与 vi 模式

---

## 3. 默认模式快捷键（常用）

### 编辑与提交

- `Ctrl+J`：保存并提交内容给 LLM（并在 /edit 场景中自动保存）
- `Ctrl+Q`：返回 CLI 单行输入界面（如果文档被编辑了，会提醒是否保存）
- `Ctrl+P`：切换到 Markdown 预览模式（ESC返回编辑模式）

### 光标与文本选择

- `Ctrl+A / Ctrl+E`：行首/行尾
- `Option+Left/Right`（或 `Alt+B/F`）：按单词移动
- `Shift+方向键`：选择文本
- `Ctrl+W`：选择单词
- `Ctrl+G`：清空选区
- `Ctrl+C / Ctrl+X / Ctrl+V`：复制/剪切/粘贴

### 预览模式

- 滚动：滚轮 / ↑ ↓ / PgUp PgDn / Home End
- `Esc`：从预览返回编辑

---

## 4. 文件编辑模式的“保存”选项

当你通过 `/edit` 打开文件时，退出编辑器会看到以下选项：

- **Save**：保存文件
- **Submit**：将内容提交给 Agent（不保存）
- **Save As**：另存为新文件
- **Save As + Submit**：另存并提交
- **Discard / Cancel**：放弃/取消

> 保存路径必须在当前工作区内。

---

## 5. vi 模式（高级用户）

在 `.dogent/dogent.json` 中设置：

```json
{
  "editor_mode": "vi"
}
```

vi 模式的核心行为：

- `i` 进入插入模式
- `Esc` 返回普通模式
- `:` 进入命令行
- 常用命令：
  - `:w` 保存
  - `:wq` 保存并提交
  - `:q` 退出（不提交）
  - `:q!` 强制退出（丢弃修改）
  - `:preview` 切换预览

编辑器底部会显示当前模式与提示，帮助你快速上手。

---

## 6. 与 Agent 交互的结合点

编辑器经常出现在以下节点：

- **澄清问题**：你可以用编辑器写完整回复
- **提纲确认**：对 outline 批注、重排、补充
- **自由补充信息**：把背景资料粘贴进编辑器再提交

这一套流程能显著提升“复杂任务的交互效率”。

---

下一章将介绍文档导出与格式转换能力。
